Oui ‚Äî c‚Äôest exactement la bonne pratique üëç
üëâ Tu peux (et tu devrais) lancer Hawtio uniquement avec un application.properties, pour √©viter une ligne de commande interminable.

Je te donne la configuration recommand√©e, sans code Java, compatible LDAPS, HTTPS, RBAC admin/viewer.


---

‚úÖ Principe retenu

Hawtio standalone (JAR)

Configuration 100 % dans application.properties

D√©marrage simple :


java -jar hawtio.jar


---

1Ô∏è‚É£ Arborescence recommand√©e

/opt/hawtio/
  hawtio.jar
  application.properties
/etc/hawtio/
  login.conf
  ssl/
    hawtio.p12
    truststore.jks   (si besoin)


---

2Ô∏è‚É£ application.properties Hawtio (COMPLET & RECOMMAND√â)

# =========================
# Identification & Port
# =========================
spring.application.name=hawtio-central
server.port=8443

# =========================
# HTTPS
# =========================
server.ssl.enabled=true
server.ssl.key-store=/etc/hawtio/ssl/hawtio.p12
server.ssl.key-store-password=changeit
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=hawtio

# =========================
# Hawtio
# =========================
hawtio.authenticationEnabled=true
hawtio.realm=hawtio
hawtio.roles=eai_hawtio_admin,eai_hawtio_viewer

# =========================
# JAAS / LDAP (LDAPS)
# =========================
java.security.auth.login.config=/etc/hawtio/login.conf

# =========================
# Session & s√©curit√© web
# =========================
server.servlet.session.timeout=30m
server.ssl.enabled-protocols=TLSv1.2,TLSv1.3

üëâ Aucune option JVM n√©cessaire, sauf √©ventuellement le truststore (voir plus bas).


---

3Ô∏è‚É£ login.conf (LDAP / LDAPS, sans Java)

hawtio {
  org.eclipse.jetty.jaas.spi.LdapLoginModule required

  contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
  hostname="ldap.mycompany.local"
  port="636"
  ssl="true"

  bindDn="cn=hawtio-bind,ou=service,dc=mycompany,dc=local"
  bindPassword="SECRET"

  userBaseDn="ou=users,dc=mycompany,dc=local"
  userRdnAttribute="uid"
  userIdAttribute="uid"

  roleBaseDn="ou=groups,dc=mycompany,dc=local"
  roleNameAttribute="cn"
  roleMemberAttribute="member"
  roleObjectClass="groupOfNames"

  forceBindingLogin="true";
};

Les groupes LDAP :

eai_hawtio_admin

eai_hawtio_viewer


sont expos√©s tels quels comme r√¥les Hawtio.


---

4Ô∏è‚É£ LDAPS ‚Äì gestion du trust (rappel)

Option recommand√©e

Importer le CA dans le trust OS :

sudo cp mycompany-ca.crt /etc/pki/ca-trust/source/anchors/
sudo update-ca-trust

Si Java ne le prend pas

Ajoute une seule option JVM dans systemd (pas en ligne de commande manuelle) :

Environment="JAVA_OPTS=-Djavax.net.ssl.trustStore=/etc/hawtio/ssl/truststore.jks -Djavax.net.ssl.trustStorePassword=changeit"


---

5Ô∏è‚É£ Lancement simple

cd /opt/hawtio
java -jar hawtio.jar

Acc√®s :

https://host:8443/hawtio


---

6Ô∏è‚É£ Service systemd (recommand√©)

[Unit]
Description=Hawtio Central Console
After=network.target

[Service]
User=hawtio
Group=hawtio
WorkingDirectory=/opt/hawtio
ExecStart=/usr/bin/java -jar /opt/hawtio/hawtio.jar
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target

sudo systemctl daemon-reload
sudo systemctl enable --now hawtio


---

üß† R√©sum√© clair

‚úî Oui, application.properties suffit
‚úî Ligne de commande ultra simple
‚úî LDAPS ‚úî
‚úî HTTPS ‚úî
‚úî Admin / Viewer ‚úî
‚úî Z√©ro code Java ‚úî


---

Si tu veux, je peux maintenant :

v√©rifier la coh√©rence s√©curit√© globale (Hawtio + Jolokia)

adapter le login.conf exactement √† Active Directory

fournir une checklist de mise en prod


Dis-moi.
