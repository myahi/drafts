8=FIXT.1.1|9=3544|35=AS|34=2|49=TRADEWEB|52=20260218-14:03:22.527|56=LBP_EURP_PT_LDN_TEST|347=UTF-8|6=0.0250|15=EUR|22=4|48=FR001400KO38|53=4000000.0|54=1|55=[N/A]|60=20260216-15:15:47.329|71=0|72=NONREF|75=20260216|87=0|107=BFCM  4.125 09/18/2030 O/30DY|118=4310776.960|159=89.810|167=REPO|228=1.0|381=4310687.150|423=9|460=13|541=20260318|755=20260216.LBP.EURP.BRKDNRESP.26300.1|794=3|857=1|893=Y|916=20260216|917=20260318|921=4310687.150|922=4310776.960|6731=20260216.LBP.EURP.8|23029=Y|23533=N|73=1|11=NONREF|198=20260216.LBP.EURP.8|66=LDN1590338.1|78=1|79=EURP1|80=4000|467=20260216.LBP.EURP.8.1|539=8|524=UNKNOWN|525=C|538=4|524=XXYUZZ|525=C|538=1002|804=1|545=ACODE|805=5100|524=0|525=C|538=1002|804=1|545=CFTC_FEDERAL_ENTITY|805=5100|524=0|525=C|538=1002|804=1|545=CFTC_FINANCIAL_ENTITY|805=5100|524=IRC000|525=C|538=1002|804=1|545=IRC_KRW_CD|805=5100|524=1234LEIEURP1|525=C|538=1002|804=1|545=LEI|805=5100|524=123456789|525=C|538=1002|804=1|545=TAX ID|805=5100|524=LBP|525=D|538=1008|154=4310776.960|742=89.810|124=1|32=4000000.0|17=20260216.LBP.EURP.8.6740|31=0.0250|232=2|233=HAIRCUT|234=-1.0|233=HAIRCUTTYPE|234=CASH|453=47|448=lbpcust1|447=C|452=11|448=lbpdlr1|447=C|452=12|802=1|523=LDN|803=25|448=LBP|447=B|452=1|802=2|523=Y|803=49|523=LDN|803=25|448=Becca Bank|447=C|452=3|802=3|523=W22LROWP2IHZNBB6K528|803=4006|523=ALLOC|803=4003|523=Y|803=49|448=W22LROWP2IHZNBB6K528|447=N|452=3|802=1|523=Y|803=49|448=0|447=D|452=1000|5098=CFTC_FEDERAL_ENTITY|448=0|447=D|452=1000|5098=CFTC_FINANCIAL_ENTITY|448=TLLXVSIM002|447=D|452=1000|5098=EUREX_ID|448=IRCOM|447=D|452=1000|5098=IRC_KRW_CD|448=BB|447=D|452=1000|5098=REPO_CLR_SA_ID|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_CNY|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_CZK|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_DKK|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_HKD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_HUF|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_INR|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_MXN|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_NZD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_SEK|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_ZAR|448=GIEU|447=D|452=1000|5098=SW_PART_ID|448=GIGA TWEB|447=D|452=1000|5098=SW_ZERO_CPN_INFL_SWAP_GID|448=GIGA_CCTEST6|447=D|452=1000|5098=SW_ZERO_CPN_INFL_SWAP_PART_BIC|448=GIEU|447=D|452=1000|5098=SW_ZERO_CPN_INFL_SWAP_PART_ID|448=XXXBLOCK|447=D|452=1000|5098=LEI|448=SDIA0|447=D|452=1000|5098=REPO_CLR_ID|448=0|447=D|452=1000|5098=SD_OR_MSP|448=SA 014 TSPO000001|447=D|452=1000|5098=SETTL_POS_ACCT_CD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_AUD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_CAD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_CHF|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_CLP|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_COP|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_EUR|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_GBP|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_ILS|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_JPY|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_KRW|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_NOK|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_PLN|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_SGD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_THB|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_TWD|448=GIGA TWEB|447=D|452=1000|5098=SW_GID_USD|448=GIGA_CCTEST6|447=D|452=1000|5098=SW_PART_BIC|448=LBPXXXXXXX|447=D|452=1003|5098=ORGCD|448=LBP|447=D|452=1008|454=2|455=EURP.SPECIAL|456=100|455=F0R03PPP5|456=1|711=1|311=[N/A]|309=FR001400KO38|305=4|307=BFCM  4.125 09/18/2030|318=EUR|879=4000000.0|882=106.689506850|810=104.9830|884=4310687.150|885=4267580.270|886=4310776.960|23055=107.767178640|10=180|
	
quickfix.FieldNotFound: Field was not found in message, field=70

	
private void sendAllocationInstructionAck(Message message,
                                          SessionID sessionID)
        throws FieldNotFound, SessionNotFound {

    AllocationInstructionAck ack =
            new AllocationInstructionAck();

    // 70 = AllocID
    ack.set(new AllocID(
            message.getString(AllocID.FIELD)));

    // 87 = AllocStatus
    ack.set(new AllocStatus(
            message.getInt(AllocStatus.FIELD)));

    // 60 = recommandé
    ack.set(new TransactTime(
            LocalDateTime.now()));

    Session.sendToTarget(ack, sessionID);

    LOGGER.info("AllocationInstructionAck sent for AllocID: {}",
            message.getString(AllocID.FIELD));
}


ack.set(new AllocAckStatus(AllocAckStatus.ACCEPTED));

private void sendAllocationInstructionAck(Message message,
                                          SessionID sessionID)
        throws FieldNotFound, SessionNotFound {

    AllocationInstructionAck ack =
            new AllocationInstructionAck();

    // === Champs obligatoires ===

    // 70 = AllocID (doit être repris tel quel du AS)
    ack.set(new AllocID(
            message.getString(AllocID.FIELD)));

    // 87 = AllocStatus (repris du AS)
    ack.set(new AllocStatus(
            message.getInt(AllocStatus.FIELD)));

    // 796 = AllocAckStatus
    ack.set(new AllocAckStatus(
            AllocAckStatus.ACCEPTED));

    // 60 = TransactTime (souvent requis par le sell-side)
    ack.set(new TransactTime(
            LocalDateTime.now()));

    // === Envoi ===
    Session.sendToTarget(ack, sessionID);

    LOGGER.info("AllocationInstructionAck sent for AllocID: {}",
            message.getString(AllocID.FIELD));
}



private void sendTradeCaptureReportAck(Message message, SessionID sessionID) throws FieldNotFound, SessionNotFound {
		TradeCaptureReportAck ack = new TradeCaptureReportAck();
		ack.set(new TradeReportID(message.getString(TradeReportID.FIELD)));
		ack.set(new TradeReportTransType(0));
		Session.sendToTarget(ack, sessionID);
		LOGGER.info("Trade Capture Report ACK sent for TradeReportID: {}", message.getString(TradeReportID.FIELD));
	}
