Parfait ğŸ‘ voici le strict minimum (classe + application.properties) pour sÃ©curiser les appels JMX/Jolokia utilisÃ©s par Hawtio, avec contrÃ´le par groupe LDAP.


---

âœ… application.properties

### LDAP
spring.ldap.urls=ldap://ldap.mycompany.local:389
spring.ldap.base=dc=mycompany,dc=local
spring.ldap.username=cn=admin,dc=mycompany,dc=local
spring.ldap.password=secret

spring.security.ldap.user-dn-patterns=uid={0},ou=users
spring.security.ldap.group-search-base=ou=groups
spring.security.ldap.group-search-filter=(member={0})

### Groupe LDAP autorisÃ© Ã  gÃ©rer Camel
security.camel.admin-group=CAMEL_ADMINS

### Hawtio / Jolokia
hawtio.authenticationEnabled=true
management.endpoints.web.exposure.include=hawtio,jolokia

> Le groupe LDAP CAMEL_ADMINS sera exposÃ© cÃ´tÃ© Spring Security comme
ROLE_CAMEL_ADMINS




---

âœ… Classe UNIQUE de sÃ©curitÃ© (JMX / Jolokia)

@Configuration
@EnableWebSecurity
public class JolokiaSecurityConfig {

  @Value("${security.camel.admin-group}")
  private String adminGroup;

  @Bean
  SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {

    http
      .csrf(csrf -> csrf.disable())
      .authorizeHttpRequests(auth -> auth
        .requestMatchers("/actuator/**").permitAll()
        .requestMatchers("/hawtio/**").authenticated()
        .requestMatchers("/jolokia/**")
          .hasAuthority("ROLE_" + adminGroup)
        .anyRequest().denyAll()
      )
      .httpBasic(); // popup navigateur

    return http.build();
  }
}


---

âœ… Ce que Ã§a fait exactement

Hawtio affiche lâ€™UI

Au premier stop/start :

popup dâ€™authentification (HTTP Basic)

credentials LDAP


âŒ user hors groupe â†’ 403

âœ… user dans groupe â†’ action JMX autorisÃ©e

Camel + DB ne voient que des actions valides



---

TL;DR

âœ”ï¸ 1 classe
âœ”ï¸ 1 propriÃ©tÃ© pour le groupe
âœ”ï¸ sÃ©curitÃ© au bon niveau (Jolokia/JMX)
âœ”ï¸ compatible Hawtio
âœ”ï¸ prÃªt prod

Si tu veux, je peux aussi te donner la version Spring Boot 3 stricte ou Active Directory (le filtre change lÃ©gÃ¨rement).
